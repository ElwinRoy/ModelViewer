<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Sneakers AR Experience</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #000;
      color: white;
      overflow: hidden;
      width: 100vw;
      height: 100vh;
    }

    /* Camera Background */
    #cameraBackground {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: 1;
      display: none;
    }

    /* Intro Screen */
    #introScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      z-index: 100;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    #introScreen h1 {
      font-size: 32px;
      font-weight: 800;
      background: linear-gradient(90deg, #00ff9d, #00d4ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-align: center;
      margin-bottom: 20px;
    }

    .press-button {
      position: relative;
      width: 200px;
      height: 200px;
      border-radius: 50%;
      background: radial-gradient(circle, #00d4ff, #0099cc);
      border: none;
      cursor: pointer;
      box-shadow: 0 0 40px rgba(0, 212, 255, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: bold;
      color: white;
      text-align: center;
      padding: 20px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 40px rgba(0, 212, 255, 0.6); }
      50% { transform: scale(1.05); box-shadow: 0 0 60px rgba(0, 212, 255, 0.9); }
    }

    .press-button::before {
      content: '';
      position: absolute;
      width: 220px;
      height: 220px;
      border-radius: 50%;
      border: 3px solid rgba(0, 212, 255, 0.3);
      animation: ripple 2s infinite;
    }

    @keyframes ripple {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(1.3); opacity: 0; }
    }

    .disclaimer {
      position: absolute;
      bottom: 30px;
      text-align: center;
      font-size: 11px;
      opacity: 0.7;
      padding: 0 40px;
      line-height: 1.4;
    }

    /* Video Screen */
    #videoScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 90;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    #videoPlayer {
      width: 85%;
      max-width: 400px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
      border: 3px solid rgba(0, 212, 255, 0.5);
      margin-bottom: 30px;
    }

    .visualize-button {
      padding: 18px 40px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 50px;
      border: none;
      background: linear-gradient(135deg, #9C27B0, #E91E63);
      color: white;
      cursor: pointer;
      box-shadow: 0 15px 40px rgba(156, 39, 176, 0.6);
      transition: all 0.3s ease;
    }

    .visualize-button:active {
      transform: scale(0.95);
    }

    /* Models Screen */
    #modelsScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 80;
      display: none;
      overflow-y: auto;
      padding: 80px 20px 30px;
    }

    .models-header {
      text-align: center;
      margin-bottom: 30px;
      z-index: 85;
      position: relative;
    }

    .models-header h2 {
      font-size: 28px;
      font-weight: 800;
      background: linear-gradient(90deg, #00ff9d, #00d4ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }

    .models-header p {
      font-size: 14px;
      opacity: 0.9;
    }

    .shoes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 22px;
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 85;
    }

    .shoe-card {
      background: rgba(255,255,255,0.12);
      border-radius: 24px;
      overflow: hidden;
      backdrop-filter: blur(20px);
      border: 2px solid rgba(255,255,255,0.2);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }

    .model-wrap { 
      height: 190px; 
      background: rgba(0,0,0,0.3);
    }
    
    model-viewer { 
      width: 100%; 
      height: 100%; 
      background: transparent; 
    }

    .info { 
      padding: 16px; 
      text-align: center; 
    }
    
    .info h3 { 
      font-size: 17px; 
      margin-bottom: 6px; 
      font-weight: 600; 
    }
    
    .info .price { 
      opacity: 0.85; 
      font-size: 15px; 
      margin-bottom: 14px; 
    }

    .btn-3d-home {
      background: linear-gradient(135deg, #9C27B0, #E91E63);
      color: white;
      border: none;
      padding: 14px 20px;
      border-radius: 50px;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin: 0 auto;
      width: 88%;
      box-shadow: 0 10px 30px rgba(156, 39, 176, 0.5);
      transition: all 0.3s ease;
    }
    
    .btn-3d-home:active { 
      transform: scale(0.95); 
    }

    /* AR Detail View */
    #arDetailView { 
      position:fixed; 
      top:0; 
      left:0; 
      width:100vw; 
      height:100vh; 
      display:none; 
      z-index:70; 
    }

    #ar3DModel {
      position:fixed; 
      top:0; 
      left:0; 
      width:100vw; 
      height:100vh; 
      z-index:71;
      --poster-color: transparent;
    }

    #closeARDetail {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      padding: 16px 40px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 50px;
      border: none;
      background: rgba(255,255,255,0.25);
      backdrop-filter: blur(12px);
      color: white;
      box-shadow: 0 12px 35px rgba(0,0,0,0.6);
      z-index: 72;
      cursor: pointer;
    }

    .volume-warning {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      padding: 12px 24px;
      border-radius: 30px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    }

    .volume-icon {
      width: 24px;
      height: 24px;
      filter: brightness(0) invert(1);
    }
  </style>
</head>
<body>

  <!-- Camera Background -->
  <video id="cameraBackground" autoplay playsinline muted></video>

  <!-- Intro Screen -->
  <div id="introScreen">
    <h1>Sneakers AR Experience</h1>
    <button class="press-button" id="startBtn">
      PRESS<br>TO START EXPERIENCE
    </button>
    <div class="disclaimer">
      This is a work of creative visualisation, for entertainment and representation purposes only.
    </div>
  </div>

  <!-- Video Screen -->
  <div id="videoScreen">
    <div class="volume-warning">
      <img src="https://cdn-icons-png.flaticon.com/512/727/727245.png" class="volume-icon">
      <span>VOLUME UP</span>
    </div>
    <video id="videoPlayer" controls autoplay>
      <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
    </video>
    <button class="visualize-button" id="visualizeBtn">
      Visualize Your Model
    </button>
  </div>

  <!-- Models Screen -->
  <div id="modelsScreen">
    <div class="models-header">
      <h2>Choose Your Footwear</h2>
      <p>Tap any shoe to view in AR</p>
    </div>
    <div class="shoes-grid" id="shoesGrid"></div>
  </div>

  <!-- AR Detail View -->
  <div id="arDetailView">
    <model-viewer id="ar3DModel"
      ar ar-modes="webxr scene-viewer quick-look"
      camera-controls auto-rotate
      shadow-intensity="2" exposure="1.1"
      environment-image="neutral">
      <button slot="ar-button" style="display:none;"></button>
    </model-viewer>
    <button id="closeARDetail">Close</button>
  </div>

  <script>
    const shoes = [
      { name: "New Balance 997", price: "₹14,999", model: "https://cdn.jsdelivr.net/gh/ElwinRoy/test@main/Shoe%2001%20(1).glb" },
      { name: "Formal Edge", price: "₹12,999", model: "https://cdn.jsdelivr.net/gh/ElwinRoy/test@main/Shoe%2002%20(1).glb" },
      { name: "ND Runner", price: "₹16,999", model: "https://cdn.jsdelivr.net/gh/ElwinRoy/test@main/Shoe%2003%20(1).glb" }
    ];

    const cameraBackground = document.getElementById("cameraBackground");
    const introScreen = document.getElementById("introScreen");
    const videoScreen = document.getElementById("videoScreen");
    const modelsScreen = document.getElementById("modelsScreen");
    const arDetailView = document.getElementById("arDetailView");
    const ar3DModel = document.getElementById("ar3DModel");
    const startBtn = document.getElementById("startBtn");
    const visualizeBtn = document.getElementById("visualizeBtn");
    const videoPlayer = document.getElementById("videoPlayer");
    const closeARDetail = document.getElementById("closeARDetail");
    const shoesGrid = document.getElementById("shoesGrid");

    let cameraStream = null;

    // Initialize camera
    async function initCamera() {
      try {
        cameraStream = await navigator.mediaDevices.getUserMedia({ 
          video: { facingMode: "environment" } 
        });
        cameraBackground.srcObject = cameraStream;
        cameraBackground.style.display = "block";
      } catch (err) {
        console.log("Camera access denied:", err);
      }
    }

    // Start button - show video
    startBtn.onclick = async () => {
      await initCamera();
      introScreen.style.display = "none";
      videoScreen.style.display = "flex";
    };

    // Visualize button - show models
    visualizeBtn.onclick = () => {
      videoScreen.style.display = "none";
      modelsScreen.style.display = "block";
    };

    // Generate shoe cards
    shoes.forEach(shoe => {
      const card = document.createElement("div");
      card.className = "shoe-card";
      card.innerHTML = `
        <div class="model-wrap">
          <model-viewer 
            src="${shoe.model}" 
            auto-rotate 
            camera-controls 
            shadow-intensity="1.5" 
            exposure="1.1" 
            loading="eager">
          </model-viewer>
        </div>
        <div class="info">
          <h3>${shoe.name}</h3>
          <div class="price">${shoe.price}</div>
          <button class="btn-3d-home" data-model="${shoe.model}">
            <img src="https://cdn-icons-png.flaticon.com/512/1087/1087080.png" 
                 style="width:26px;height:26px;filter:brightness(0)invert(1)">
            View in AR
          </button>
        </div>
      `;
      shoesGrid.appendChild(card);
    });

    // View in AR buttons
    document.querySelectorAll('.btn-3d-home').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const modelUrl = btn.getAttribute('data-model');
        
        modelsScreen.style.display = "none";
        arDetailView.style.display = "block";
        ar3DModel.src = modelUrl;
      });
    });

    // Close AR detail view
    closeARDetail.onclick = () => {
      arDetailView.style.display = "none";
      modelsScreen.style.display = "block";
    };

    // Stop camera when leaving
    window.addEventListener('beforeunload', () => {
      if (cameraStream) {
        cameraStream.getTracks().forEach(track => track.stop());
      }
    });
  </script>
</body>
</html>
